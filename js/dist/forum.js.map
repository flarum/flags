{"version":3,"sources":["webpack://@flarum/flags/webpack/bootstrap","webpack://@flarum/flags/external \"flarum.core.compat['app']\"","webpack://@flarum/flags/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/flags/external \"flarum.core.compat['extend']\"","webpack://@flarum/flags/external \"flarum.core.compat['Model']\"","webpack://@flarum/flags/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flarum/flags/external \"flarum.core.compat['components/Button']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/Post']\"","webpack://@flarum/flags/external \"flarum.core\"","webpack://@flarum/flags/external \"flarum.core.compat['utils/PostControls']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/Page']\"","webpack://@flarum/flags/external \"flarum.core.compat['Component']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@flarum/flags/external \"flarum.core.compat['helpers/avatar']\"","webpack://@flarum/flags/external \"flarum.core.compat['helpers/username']\"","webpack://@flarum/flags/external \"flarum.core.compat['helpers/icon']\"","webpack://@flarum/flags/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/Modal']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/HeaderSecondary']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/NotificationsDropdown']\"","webpack://@flarum/flags/external \"flarum.core.compat['utils/ItemList']\"","webpack://@flarum/flags/./src/forum/models/Flag.js","webpack://@flarum/flags/./src/forum/components/FlagList.js","webpack://@flarum/flags/./src/forum/components/FlagsPage.js","webpack://@flarum/flags/./src/forum/components/FlagPostModal.js","webpack://@flarum/flags/./src/forum/addFlagControl.js","webpack://@flarum/flags/./src/forum/components/FlagsDropdown.js","webpack://@flarum/flags/./src/forum/addFlagsDropdown.js","webpack://@flarum/flags/./src/forum/addFlagsToPosts.js","webpack://@flarum/flags/./src/forum/compat.js","webpack://@flarum/flags/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_inheritsLoose","subClass","superClass","constructor","__proto__","__webpack_exports__","_extends","assign","target","arguments","length","source","apply","this","Flag","Model","esm_extends","type","attribute","reason","reasonDetail","createdAt","transformDate","post","hasOne","user","FlagList","init","loading","view","flags","app","cache","className","translator","trans","map","flag","href","route","config","element","isInitialized","$","on","flagIndex","avatar","icon","username","em","discussion","title","humanTime","contentPlain","LoadingIndicator","component","load","_this","session","redraw","store","find","then","pushAttributes","newFlagCount","sort","a","b","catch","Component","FlagsPage","_Page","history","push","list","bodyClass","render","Page","FlagPostModal","_Modal","success","prop","content","Button_default","onclick","hide","guidelinesUrl","forum","checked","withAttr","undefined","oninput","disabled","onsubmit","e","preventDefault","createRecord","save","relationships","props","loaded","Modal","addFlagControl","extend","PostControls","items","isHidden","contentType","canFlag","Number","add","modal","show","FlagsDropdown","initProps","label","_NotificationsDropdow","goToRoute","getUnreadCount","getNewCount","NotificationsDropdown","addFlagsDropdown","HeaderSecondary","FlagsDropdown_FlagsDropdown","addFlagsToPosts","Post","attrs","dismissFlag","data","subtree","invalidate","some","splice","next","nextPost","request","url","apiEndpoint","method","flagActionItems","ItemList","controls","destructiveControls","keys","forEach","k","toArray","vdom","_this2","revealContent","unshift","flagReason","detail","flags/addFlagsToPosts","flags/addFlagControl","flags/addFlagsDropdown","flags/models/Flag","flags/components/FlagList","flags/components/FlagPostModal","flags/components/FlagsPage","flags/components/FlagsDropdown","initializers","models","posts","hasMany","routes","path","FlagsPage_FlagsPage","flagsCompat"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n","module.exports = flarum.core.compat['app'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['Model'];","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Post'];","module.exports = flarum.core;","module.exports = flarum.core.compat['utils/PostControls'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/HeaderSecondary'];","module.exports = flarum.core.compat['components/NotificationsDropdown'];","module.exports = flarum.core.compat['utils/ItemList'];","import Model from 'flarum/Model';\r\n\r\nclass Flag extends Model {}\r\n\r\nObject.assign(Flag.prototype, {\r\n  type: Model.attribute('type'),\r\n  reason: Model.attribute('reason'),\r\n  reasonDetail: Model.attribute('reasonDetail'),\r\n  createdAt: Model.attribute('createdAt', Model.transformDate),\r\n\r\n  post: Model.hasOne('post'),\r\n  user: Model.hasOne('user')\r\n});\r\n\r\nexport default Flag;\r\n","import Component from 'flarum/Component';\r\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\r\nimport avatar from 'flarum/helpers/avatar';\r\nimport username from 'flarum/helpers/username';\r\nimport icon from 'flarum/helpers/icon';\r\nimport humanTime from 'flarum/helpers/humanTime';\r\n\r\nexport default class FlagList extends Component {\r\n  init() {\r\n    /**\r\n     * Whether or not the notifications are loading.\r\n     *\r\n     * @type {Boolean}\r\n     */\r\n    this.loading = false;\r\n  }\r\n\r\n  view() {\r\n    const flags = app.cache.flags || [];\r\n\r\n    return (\r\n      <div className=\"NotificationList FlagList\">\r\n        <div className=\"NotificationList-header\">\r\n          <h4 className=\"App-titleControl App-titleControl--text\">{app.translator.trans('flarum-flags.forum.flagged_posts.title')}</h4>\r\n        </div>\r\n        <div className=\"NotificationList-content\">\r\n          <ul className=\"NotificationGroup-content\">\r\n            {flags.length\r\n              ? flags.map(flag => {\r\n                const post = flag.post();\r\n\r\n                return (\r\n                  <li>\r\n                    <a href={app.route.post(post)} className=\"Notification Flag\" config={function(element, isInitialized) {\r\n                      m.route.apply(this, arguments);\r\n\r\n                      if (!isInitialized) $(element).on('click', () => app.cache.flagIndex = post);\r\n                    }}>\r\n                      {avatar(post.user())}\r\n                      {icon('fas fa-flag', {className: 'Notification-icon'})}\r\n                      <span className=\"Notification-content\">\r\n                        {app.translator.trans('flarum-flags.forum.flagged_posts.item_text', {username: username(post.user()), em: <em/>, discussion: post.discussion().title()})}\r\n                      </span>\r\n                      {humanTime(flag.createdAt())}\r\n                      <div className=\"Notification-excerpt\">\r\n                        {post.contentPlain()}\r\n                      </div>\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })\r\n              : !this.loading\r\n                ? <div className=\"NotificationList-empty\">{app.translator.trans('flarum-flags.forum.flagged_posts.empty_text')}</div>\r\n                : LoadingIndicator.component({className: 'LoadingIndicator--block'})}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Load flags into the application's cache if they haven't already\r\n   * been loaded.\r\n   */\r\n  load() {\r\n    if (app.cache.flags && !app.session.user.attribute('newFlagCount')) {\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    m.redraw();\r\n\r\n    app.store.find('flags')\r\n      .then(flags => {\r\n        app.session.user.pushAttributes({newFlagCount: 0});\r\n        app.cache.flags = flags.sort((a, b) => b.createdAt() - a.createdAt());\r\n      })\r\n      .catch(() => {})\r\n      .then(() => {\r\n        this.loading = false;\r\n        m.redraw();\r\n      });\r\n  }\r\n}\r\n","import Page from 'flarum/components/Page';\r\n\r\nimport FlagList from './FlagList';\r\n\r\n/**\r\n * The `FlagsPage` component shows the flags list. It is only\r\n * used on mobile devices where the flags dropdown is within the drawer.\r\n */\r\nexport default class FlagsPage extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.history.push('flags');\r\n\r\n    this.list = new FlagList();\r\n    this.list.load();\r\n\r\n    this.bodyClass = 'App--flags';\r\n  }\r\n\r\n  view() {\r\n    return <div className=\"FlagsPage\">{this.list.render()}</div>;\r\n  }\r\n}\r\n","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\n\r\nexport default class FlagPostModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.success = false;\r\n\r\n    this.reason = m.prop('');\r\n    this.reasonDetail = m.prop('');\r\n  }\r\n\r\n  className() {\r\n    return 'FlagPostModal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('flarum-flags.forum.flag_post.title');\r\n  }\r\n\r\n  content() {\r\n    if (this.success) {\r\n      return (\r\n        <div className=\"Modal-body\">\r\n          <div className=\"Form Form--centered\">\r\n            <p className=\"helpText\">{app.translator.trans('flarum-flags.forum.flag_post.confirmation_message')}</p>\r\n            <div className=\"Form-group\">\r\n              <Button className=\"Button Button--primary Button--block\" onclick={this.hide.bind(this)}>\r\n                {app.translator.trans('flarum-flags.forum.flag_post.dismiss_button')}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const guidelinesUrl = app.forum.attribute('guidelinesUrl');\r\n\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form Form--centered\">\r\n          <div className=\"Form-group\">\r\n            <div>\r\n              <label className=\"checkbox\">\r\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'off_topic'} value=\"off_topic\" onclick={m.withAttr('value', this.reason)}/>\r\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_label')}</strong>\r\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_text')}\r\n              </label>\r\n\r\n              <label className=\"checkbox\">\r\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'inappropriate'} value=\"inappropriate\" onclick={m.withAttr('value', this.reason)}/>\r\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_label')}</strong>\r\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_text', {\r\n                  a: guidelinesUrl ? <a href={guidelinesUrl} target=\"_blank\"/> : undefined\r\n                })}\r\n              </label>\r\n\r\n              <label className=\"checkbox\">\r\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'spam'} value=\"spam\" onclick={m.withAttr('value', this.reason)}/>\r\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_spam_label')}</strong>\r\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_spam_text')}\r\n              </label>\r\n\r\n              <label className=\"checkbox\">\r\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'other'} value=\"other\" onclick={m.withAttr('value', this.reason)}/>\r\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_other_label')}</strong>\r\n                {this.reason() === 'other' ? (\r\n                  <textarea className=\"FormControl\" value={this.reasonDetail()} oninput={m.withAttr('value', this.reasonDetail)}></textarea>\r\n                ) : ''}\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"Form-group\">\r\n            <Button\r\n              className=\"Button Button--primary Button--block\"\r\n              type=\"submit\"\r\n              loading={this.loading}\r\n              disabled={!this.reason() || this.reason() === 'other' && !this.reasonDetail()}>\r\n              {app.translator.trans('flarum-flags.forum.flag_post.submit_button')}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    app.store.createRecord('flags').save({\r\n      reason: this.reason() === 'other' ? null : this.reason(),\r\n      reasonDetail: this.reasonDetail(),\r\n      relationships: {\r\n        user: app.session.user,\r\n        post: this.props.post\r\n      }\r\n    })\r\n      .then(() => this.success = true)\r\n      .catch(() => {})\r\n      .then(this.loaded.bind(this));\r\n  }\r\n}\r\n","import { extend } from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport PostControls from 'flarum/utils/PostControls';\r\nimport Button from 'flarum/components/Button';\r\n\r\nimport FlagPostModal from './components/FlagPostModal';\r\n\r\nexport default function() {\r\n  extend(PostControls, 'userControls', function(items, post) {\r\n    if (post.isHidden() || post.contentType() !== 'comment' || !post.canFlag() || post.user() === app.session.user && !Number(app.forum.attribute('canFlagOwn'))) return;\r\n\r\n    items.add('flag',\r\n      <Button icon=\"fas fa-flag\" onclick={() => app.modal.show(new FlagPostModal({post}))}>{app.translator.trans('flarum-flags.forum.post_controls.flag_button')}</Button>\r\n    );\r\n  });\r\n}\r\n","import NotificationsDropdown from 'flarum/components/NotificationsDropdown';\r\n\r\nimport FlagList from './FlagList';\r\n\r\nexport default class FlagsDropdown extends NotificationsDropdown {\r\n  static initProps(props) {\r\n    props.label = props.label || app.translator.trans('flarum-flags.forum.flagged_posts.tooltip');\r\n    props.icon = props.icon || 'fas fa-flag';\r\n\r\n    super.initProps(props);\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    this.list = new FlagList();\r\n  }\r\n\r\n  goToRoute() {\r\n    m.route(app.route('flags'));\r\n  }\r\n\r\n  getUnreadCount() {\r\n    return app.cache.flags ? app.cache.flags.length : app.forum.attribute('flagCount');\r\n  }\r\n\r\n  getNewCount() {\r\n    return app.session.user.attribute('newFlagCount');\r\n  }\r\n}\r\n","import { extend } from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport HeaderSecondary from 'flarum/components/HeaderSecondary';\r\nimport FlagsDropdown from './components/FlagsDropdown';\r\n\r\nexport default function() {\r\n  extend(HeaderSecondary.prototype, 'items', function(items) {\r\n    if (app.forum.attribute('canViewFlags')) {\r\n      items.add('flags', <FlagsDropdown/>, 15);\r\n    }\r\n  });\r\n}\r\n","import { extend } from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport Post from 'flarum/components/Post';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport PostControls from 'flarum/utils/PostControls';\r\n\r\nexport default function() {\r\n  extend(Post.prototype, 'attrs', function(attrs) {\r\n    if (this.props.post.flags().length) {\r\n      attrs.className += ' Post--flagged';\r\n    }\r\n  });\r\n\r\n  Post.prototype.dismissFlag = function(data) {\r\n    const post = this.props.post;\r\n\r\n    delete post.data.relationships.flags;\r\n\r\n    this.subtree.invalidate();\r\n\r\n    if (app.cache.flags) {\r\n      app.cache.flags.some((flag, i) => {\r\n        if (flag.post() === post) {\r\n          app.cache.flags.splice(i, 1);\r\n\r\n          if (app.cache.flagIndex === post) {\r\n            let next = app.cache.flags[i];\r\n\r\n            if (!next) next = app.cache.flags[0];\r\n\r\n            if (next) {\r\n              const nextPost = next.post();\r\n              app.cache.flagIndex = nextPost;\r\n              m.route(app.route.post(nextPost));\r\n            }\r\n          }\r\n\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n\r\n    return app.request({\r\n      url: app.forum.attribute('apiUrl') + post.apiEndpoint() + '/flags',\r\n      method: 'DELETE',\r\n      data\r\n    });\r\n  };\r\n\r\n  Post.prototype.flagActionItems = function() {\r\n    const items = new ItemList();\r\n\r\n    const controls = PostControls.destructiveControls(this.props.post);\r\n\r\n    Object.keys(controls.items).forEach(k => {\r\n      const props = controls.get(k).props;\r\n\r\n      props.className = 'Button';\r\n\r\n      extend(props, 'onclick', () => this.dismissFlag());\r\n    });\r\n\r\n    items.add('controls', (\r\n      <div className=\"ButtonGroup\">\r\n        {controls.toArray()}\r\n      </div>\r\n    ));\r\n\r\n    items.add('dismiss', (\r\n      <Button className=\"Button\" icon=\"far fa-eye-slash\" onclick={this.dismissFlag.bind(this)}>\r\n        {app.translator.trans('flarum-flags.forum.post.dismiss_flag_button')}\r\n      </Button>\r\n    ), -100);\r\n\r\n    return items;\r\n  };\r\n\r\n  extend(Post.prototype, 'content', function(vdom) {\r\n    const post = this.props.post;\r\n    const flags = post.flags();\r\n\r\n    if (!flags.length) return;\r\n\r\n    if (post.isHidden()) this.revealContent = true;\r\n\r\n    vdom.unshift(\r\n      <div className=\"Post-flagged\">\r\n        <div className=\"Post-flagged-flags\">\r\n          {flags.map(flag =>\r\n            <div className=\"Post-flagged-flag\">\r\n              {this.flagReason(flag)}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"Post-flagged-actions\">\r\n          {this.flagActionItems().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  Post.prototype.flagReason = function(flag) {\r\n    if (flag.type() === 'user') {\r\n      const user = flag.user();\r\n      const reason = flag.reason();\r\n      const detail = flag.reasonDetail();\r\n\r\n      return [\r\n        app.translator.trans(reason ? 'flarum-flags.forum.post.flagged_by_with_reason_text' : 'flarum-flags.forum.post.flagged_by_text', {user, reason}),\r\n        detail ? <span className=\"Post-flagged-detail\">{detail}</span> : ''\r\n      ];\r\n    }\r\n  };\r\n}\r\n","import addFlagsToPosts from './addFlagsToPosts';\r\nimport addFlagControl from './addFlagControl';\r\nimport addFlagsDropdown from './addFlagsDropdown';\r\nimport Flag from './models/Flag';\r\nimport FlagList from './components/FlagList';\r\nimport FlagPostModal from './components/FlagPostModal';\r\nimport FlagsPage from './components/FlagsPage';\r\nimport FlagsDropdown from './components/FlagsDropdown';\r\n\r\nexport default {\r\n  'flags/addFlagsToPosts': addFlagsToPosts,\r\n  'flags/addFlagControl': addFlagControl,\r\n  'flags/addFlagsDropdown': addFlagsDropdown,\r\n  'flags/models/Flag': Flag,\r\n  'flags/components/FlagList': FlagList,\r\n  'flags/components/FlagPostModal': FlagPostModal,\r\n  'flags/components/FlagsPage': FlagsPage,\r\n  'flags/components/FlagsDropdown': FlagsDropdown,\r\n};\r\n","import app from 'flarum/app';\r\nimport Model from 'flarum/Model';\r\n\r\nimport Flag from './models/Flag';\r\nimport FlagsPage from './components/FlagsPage';\r\nimport addFlagControl from './addFlagControl';\r\nimport addFlagsDropdown from './addFlagsDropdown';\r\nimport addFlagsToPosts from './addFlagsToPosts';\r\n\r\napp.initializers.add('flarum-flags', () => {\r\n  app.store.models.posts.prototype.flags = Model.hasMany('flags');\r\n  app.store.models.posts.prototype.canFlag = Model.attribute('canFlag');\r\n\r\n  app.store.models.flags = Flag;\r\n\r\n  app.routes.flags = {path: '/flags', component: <FlagsPage/>};\r\n\r\n  addFlagControl();\r\n  addFlagsDropdown();\r\n  addFlagsToPosts();\r\n});\r\n\r\n// Expose compat API\r\nimport flagsCompat from './compat';\r\nimport { compat } from '@flarum/core/forum';\r\n\r\nObject.assign(compat, flagsCompat);\r\n"],"sourceRoot":""}