{"version":3,"sources":["webpack://@flarum/flags/webpack/bootstrap","webpack://@flarum/flags/./forum.js","webpack://@flarum/flags/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flarum/flags/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/flags/./src/forum/addFlagControl.js","webpack://@flarum/flags/./src/forum/addFlagsDropdown.js","webpack://@flarum/flags/./src/forum/addFlagsToPosts.js","webpack://@flarum/flags/./src/forum/compat.js","webpack://@flarum/flags/./src/forum/components/FlagList.js","webpack://@flarum/flags/./src/forum/components/FlagPostModal.js","webpack://@flarum/flags/./src/forum/components/FlagsDropdown.js","webpack://@flarum/flags/./src/forum/components/FlagsPage.js","webpack://@flarum/flags/./src/forum/index.js","webpack://@flarum/flags/./src/forum/models/Flag.js","webpack://@flarum/flags/external \"flarum.core\"","webpack://@flarum/flags/external \"flarum.core.compat['Component']\"","webpack://@flarum/flags/external \"flarum.core.compat['Model']\"","webpack://@flarum/flags/external \"flarum.core.compat['app']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/Button']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/HeaderSecondary']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/Modal']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/NotificationsDropdown']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/Page']\"","webpack://@flarum/flags/external \"flarum.core.compat['components/Post']\"","webpack://@flarum/flags/external \"flarum.core.compat['extend']\"","webpack://@flarum/flags/external \"flarum.core.compat['helpers/avatar']\"","webpack://@flarum/flags/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@flarum/flags/external \"flarum.core.compat['helpers/icon']\"","webpack://@flarum/flags/external \"flarum.core.compat['helpers/username']\"","webpack://@flarum/flags/external \"flarum.core.compat['utils/ItemList']\"","webpack://@flarum/flags/external \"flarum.core.compat['utils/PostControls']\""],"names":["extend","PostControls","items","post","isHidden","contentType","canFlag","user","app","session","Number","forum","attribute","add","modal","show","FlagPostModal","translator","trans","HeaderSecondary","prototype","Post","attrs","props","flags","length","className","dismissFlag","data","relationships","subtree","invalidate","cache","some","flag","i","splice","flagIndex","next","nextPost","m","route","request","url","apiEndpoint","method","flagActionItems","ItemList","controls","destructiveControls","Object","keys","forEach","k","get","toArray","bind","vdom","revealContent","unshift","map","flagReason","type","reason","detail","reasonDetail","addFlagsToPosts","addFlagControl","addFlagsDropdown","Flag","FlagList","FlagsPage","FlagsDropdown","init","loading","view","element","isInitialized","apply","arguments","$","on","avatar","icon","username","em","discussion","title","humanTime","createdAt","contentPlain","LoadingIndicator","component","load","redraw","store","find","then","pushAttributes","newFlagCount","sort","a","b","catch","Component","success","prop","content","hide","guidelinesUrl","withAttr","undefined","onsubmit","e","preventDefault","createRecord","save","loaded","Modal","initProps","label","list","goToRoute","getUnreadCount","getNewCount","NotificationsDropdown","history","push","bodyClass","render","Page","initializers","models","posts","Model","hasMany","routes","path","compat","flagsCompat","transformDate","hasOne"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nexport * from './src/forum';\r\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport PostControls from 'flarum/utils/PostControls';\r\nimport Button from 'flarum/components/Button';\r\n\r\nimport FlagPostModal from './components/FlagPostModal';\r\n\r\nexport default function() {\r\n  extend(PostControls, 'userControls', function(items, post) {\r\n    if (post.isHidden() || post.contentType() !== 'comment' || !post.canFlag() || post.user() === app.session.user && !Number(app.forum.attribute('canFlagOwn'))) return;\r\n\r\n    items.add('flag',\r\n      <Button icon=\"fas fa-flag\" onclick={() => app.modal.show(new FlagPostModal({post}))}>{app.translator.trans('flarum-flags.forum.post_controls.flag_button')}</Button>\r\n    );\r\n  });\r\n}\r\n","import { extend } from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport HeaderSecondary from 'flarum/components/HeaderSecondary';\r\nimport FlagsDropdown from './components/FlagsDropdown';\r\n\r\nexport default function() {\r\n  extend(HeaderSecondary.prototype, 'items', function(items) {\r\n    if (app.forum.attribute('canViewFlags')) {\r\n      items.add('flags', <FlagsDropdown/>, 15);\r\n    }\r\n  });\r\n}\r\n","import { extend } from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport Post from 'flarum/components/Post';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport PostControls from 'flarum/utils/PostControls';\r\n\r\nexport default function() {\r\n  extend(Post.prototype, 'attrs', function(attrs) {\r\n    if (this.props.post.flags().length) {\r\n      attrs.className += ' Post--flagged';\r\n    }\r\n  });\r\n\r\n  Post.prototype.dismissFlag = function(data) {\r\n    const post = this.props.post;\r\n\r\n    delete post.data.relationships.flags;\r\n\r\n    this.subtree.invalidate();\r\n\r\n    if (app.cache.flags) {\r\n      app.cache.flags.some((flag, i) => {\r\n        if (flag.post() === post) {\r\n          app.cache.flags.splice(i, 1);\r\n\r\n          if (app.cache.flagIndex === post) {\r\n            let next = app.cache.flags[i];\r\n\r\n            if (!next) next = app.cache.flags[0];\r\n\r\n            if (next) {\r\n              const nextPost = next.post();\r\n              app.cache.flagIndex = nextPost;\r\n              m.route(app.route.post(nextPost));\r\n            }\r\n          }\r\n\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n\r\n    return app.request({\r\n      url: app.forum.attribute('apiUrl') + post.apiEndpoint() + '/flags',\r\n      method: 'DELETE',\r\n      data\r\n    });\r\n  };\r\n\r\n  Post.prototype.flagActionItems = function() {\r\n    const items = new ItemList();\r\n\r\n    const controls = PostControls.destructiveControls(this.props.post);\r\n\r\n    Object.keys(controls.items).forEach(k => {\r\n      const props = controls.get(k).props;\r\n\r\n      props.className = 'Button';\r\n\r\n      extend(props, 'onclick', () => this.dismissFlag());\r\n    });\r\n\r\n    items.add('controls', (\r\n      <div className=\"ButtonGroup\">\r\n        {controls.toArray()}\r\n      </div>\r\n    ));\r\n\r\n    items.add('dismiss', (\r\n      <Button className=\"Button\" icon=\"far fa-eye-slash\" onclick={this.dismissFlag.bind(this)}>\r\n        {app.translator.trans('flarum-flags.forum.post.dismiss_flag_button')}\r\n      </Button>\r\n    ), -100);\r\n\r\n    return items;\r\n  };\r\n\r\n  extend(Post.prototype, 'content', function(vdom) {\r\n    const post = this.props.post;\r\n    const flags = post.flags();\r\n\r\n    if (!flags.length) return;\r\n\r\n    if (post.isHidden()) this.revealContent = true;\r\n\r\n    vdom.unshift(\r\n      <div className=\"Post-flagged\">\r\n        <div className=\"Post-flagged-flags\">\r\n          {flags.map(flag =>\r\n            <div className=\"Post-flagged-flag\">\r\n              {this.flagReason(flag)}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"Post-flagged-actions\">\r\n          {this.flagActionItems().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  Post.prototype.flagReason = function(flag) {\r\n    if (flag.type() === 'user') {\r\n      const user = flag.user();\r\n      const reason = flag.reason();\r\n      const detail = flag.reasonDetail();\r\n\r\n      return [\r\n        app.translator.trans(reason ? 'flarum-flags.forum.post.flagged_by_with_reason_text' : 'flarum-flags.forum.post.flagged_by_text', {user, reason}),\r\n        detail ? <span className=\"Post-flagged-detail\">{detail}</span> : ''\r\n      ];\r\n    }\r\n  };\r\n}\r\n","import addFlagsToPosts from './addFlagsToPosts';\r\nimport addFlagControl from './addFlagControl';\r\nimport addFlagsDropdown from './addFlagsDropdown';\r\nimport Flag from './models/Flag';\r\nimport FlagList from './components/FlagList';\r\nimport FlagPostModal from './components/FlagPostModal';\r\nimport FlagsPage from './components/FlagsPage';\r\nimport FlagsDropdown from './components/FlagsDropdown';\r\n\r\nexport default {\r\n  'flags/addFlagsToPosts': addFlagsToPosts,\r\n  'flags/addFlagControl': addFlagControl,\r\n  'flags/addFlagsDropdown': addFlagsDropdown,\r\n  'flags/models/Flag': Flag,\r\n  'flags/components/FlagList': FlagList,\r\n  'flags/components/FlagPostModal': FlagPostModal,\r\n  'flags/components/FlagsPage': FlagsPage,\r\n  'flags/components/FlagsDropdown': FlagsDropdown,\r\n};\r\n","import Component from 'flarum/Component';\r\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\r\nimport avatar from 'flarum/helpers/avatar';\r\nimport username from 'flarum/helpers/username';\r\nimport icon from 'flarum/helpers/icon';\r\nimport humanTime from 'flarum/helpers/humanTime';\r\n\r\nexport default class FlagList extends Component {\r\n  init() {\r\n    /**\r\n     * Whether or not the notifications are loading.\r\n     *\r\n     * @type {Boolean}\r\n     */\r\n    this.loading = false;\r\n  }\r\n\r\n  view() {\r\n    const flags = app.cache.flags || [];\r\n\r\n    return (\r\n      <div className=\"NotificationList FlagList\">\r\n        <div className=\"NotificationList-header\">\r\n          <h4 className=\"App-titleControl App-titleControl--text\">{app.translator.trans('flarum-flags.forum.flagged_posts.title')}</h4>\r\n        </div>\r\n        <div className=\"NotificationList-content\">\r\n          <ul className=\"NotificationGroup-content\">\r\n            {flags.length\r\n              ? flags.map(flag => {\r\n                const post = flag.post();\r\n\r\n                return (\r\n                  <li>\r\n                    <a href={app.route.post(post)} className=\"Notification Flag\" config={function(element, isInitialized) {\r\n                      m.route.apply(this, arguments);\r\n\r\n                      if (!isInitialized) $(element).on('click', () => app.cache.flagIndex = post);\r\n                    }}>\r\n                      {avatar(post.user())}\r\n                      {icon('fas fa-flag', {className: 'Notification-icon'})}\r\n                      <span className=\"Notification-content\">\r\n                        {app.translator.trans('flarum-flags.forum.flagged_posts.item_text', {username: username(post.user()), em: <em/>, discussion: post.discussion().title()})}\r\n                      </span>\r\n                      {humanTime(flag.createdAt())}\r\n                      <div className=\"Notification-excerpt\">\r\n                        {post.contentPlain()}\r\n                      </div>\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })\r\n              : !this.loading\r\n                ? <div className=\"NotificationList-empty\">{app.translator.trans('flarum-flags.forum.flagged_posts.empty_text')}</div>\r\n                : LoadingIndicator.component({className: 'LoadingIndicator--block'})}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Load flags into the application's cache if they haven't already\r\n   * been loaded.\r\n   */\r\n  load() {\r\n    if (app.cache.flags && !app.session.user.attribute('newFlagCount')) {\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    m.redraw();\r\n\r\n    app.store.find('flags')\r\n      .then(flags => {\r\n        app.session.user.pushAttributes({newFlagCount: 0});\r\n        app.cache.flags = flags.sort((a, b) => b.createdAt() - a.createdAt());\r\n      })\r\n      .catch(() => {})\r\n      .then(() => {\r\n        this.loading = false;\r\n        m.redraw();\r\n      });\r\n  }\r\n}\r\n","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\n\r\nexport default class FlagPostModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.success = false;\r\n\r\n    this.reason = m.prop('');\r\n    this.reasonDetail = m.prop('');\r\n  }\r\n\r\n  className() {\r\n    return 'FlagPostModal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('flarum-flags.forum.flag_post.title');\r\n  }\r\n\r\n  content() {\r\n    if (this.success) {\r\n      return (\r\n        <div className=\"Modal-body\">\r\n          <div className=\"Form Form--centered\">\r\n            <p className=\"helpText\">{app.translator.trans('flarum-flags.forum.flag_post.confirmation_message')}</p>\r\n            <div className=\"Form-group\">\r\n              <Button className=\"Button Button--primary Button--block\" onclick={this.hide.bind(this)}>\r\n                {app.translator.trans('flarum-flags.forum.flag_post.dismiss_button')}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const guidelinesUrl = app.forum.attribute('guidelinesUrl');\r\n\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form Form--centered\">\r\n          <div className=\"Form-group\">\r\n            <div>\r\n              <label className=\"checkbox\">\r\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'off_topic'} value=\"off_topic\" onclick={m.withAttr('value', this.reason)}/>\r\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_label')}</strong>\r\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_text')}\r\n              </label>\r\n\r\n              <label className=\"checkbox\">\r\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'inappropriate'} value=\"inappropriate\" onclick={m.withAttr('value', this.reason)}/>\r\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_label')}</strong>\r\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_text', {\r\n                  a: guidelinesUrl ? <a href={guidelinesUrl} target=\"_blank\"/> : undefined\r\n                })}\r\n              </label>\r\n\r\n              <label className=\"checkbox\">\r\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'spam'} value=\"spam\" onclick={m.withAttr('value', this.reason)}/>\r\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_spam_label')}</strong>\r\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_spam_text')}\r\n              </label>\r\n\r\n              <label className=\"checkbox\">\r\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'other'} value=\"other\" onclick={m.withAttr('value', this.reason)}/>\r\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_other_label')}</strong>\r\n                {this.reason() === 'other' ? (\r\n                  <textarea className=\"FormControl\" value={this.reasonDetail()} oninput={m.withAttr('value', this.reasonDetail)}></textarea>\r\n                ) : ''}\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"Form-group\">\r\n            <Button\r\n              className=\"Button Button--primary Button--block\"\r\n              type=\"submit\"\r\n              loading={this.loading}\r\n              disabled={!this.reason()}>\r\n              {app.translator.trans('flarum-flags.forum.flag_post.submit_button')}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    app.store.createRecord('flags').save({\r\n      reason: this.reason() === 'other' ? null : this.reason(),\r\n      reasonDetail: this.reasonDetail(),\r\n      relationships: {\r\n        user: app.session.user,\r\n        post: this.props.post\r\n      }\r\n    })\r\n      .then(() => this.success = true)\r\n      .catch(() => {})\r\n      .then(this.loaded.bind(this));\r\n  }\r\n}\r\n","import NotificationsDropdown from 'flarum/components/NotificationsDropdown';\r\n\r\nimport FlagList from './FlagList';\r\n\r\nexport default class FlagsDropdown extends NotificationsDropdown {\r\n  static initProps(props) {\r\n    props.label = props.label || app.translator.trans('flarum-flags.forum.flagged_posts.tooltip');\r\n    props.icon = props.icon || 'fas fa-flag';\r\n\r\n    super.initProps(props);\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    this.list = new FlagList();\r\n  }\r\n\r\n  goToRoute() {\r\n    m.route(app.route('flags'));\r\n  }\r\n\r\n  getUnreadCount() {\r\n    return app.cache.flags ? app.cache.flags.length : app.forum.attribute('flagCount');\r\n  }\r\n\r\n  getNewCount() {\r\n    return app.session.user.attribute('newFlagCount');\r\n  }\r\n}\r\n","import Page from 'flarum/components/Page';\r\n\r\nimport FlagList from './FlagList';\r\n\r\n/**\r\n * The `FlagsPage` component shows the flags list. It is only\r\n * used on mobile devices where the flags dropdown is within the drawer.\r\n */\r\nexport default class FlagsPage extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.history.push('flags');\r\n\r\n    this.list = new FlagList();\r\n    this.list.load();\r\n\r\n    this.bodyClass = 'App--flags';\r\n  }\r\n\r\n  view() {\r\n    return <div className=\"FlagsPage\">{this.list.render()}</div>;\r\n  }\r\n}\r\n","import app from 'flarum/app';\r\nimport Model from 'flarum/Model';\r\n\r\nimport Flag from './models/Flag';\r\nimport FlagsPage from './components/FlagsPage';\r\nimport addFlagControl from './addFlagControl';\r\nimport addFlagsDropdown from './addFlagsDropdown';\r\nimport addFlagsToPosts from './addFlagsToPosts';\r\n\r\napp.initializers.add('flarum-flags', () => {\r\n  app.store.models.posts.prototype.flags = Model.hasMany('flags');\r\n  app.store.models.posts.prototype.canFlag = Model.attribute('canFlag');\r\n\r\n  app.store.models.flags = Flag;\r\n\r\n  app.routes.flags = {path: '/flags', component: <FlagsPage/>};\r\n\r\n  addFlagControl();\r\n  addFlagsDropdown();\r\n  addFlagsToPosts();\r\n});\r\n\r\n// Expose compat API\r\nimport flagsCompat from './compat';\r\nimport { compat } from '@flarum/core/forum';\r\n\r\nObject.assign(compat, flagsCompat);\r\n","import Model from 'flarum/Model';\r\n\r\nclass Flag extends Model {}\r\n\r\nObject.assign(Flag.prototype, {\r\n  type: Model.attribute('type'),\r\n  reason: Model.attribute('reason'),\r\n  reasonDetail: Model.attribute('reasonDetail'),\r\n  createdAt: Model.attribute('createdAt', Model.transformDate),\r\n\r\n  post: Model.hasOne('post'),\r\n  user: Model.hasOne('user')\r\n});\r\n\r\nexport default Flag;\r\n","module.exports = flarum.core;","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/HeaderSecondary'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/NotificationsDropdown'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Post'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/PostControls'];"],"sourceRoot":""}